{% extends 'base/base.html' %}
{% load static %}
{% block head %}
<link href="{% static 'css/home.css' %}" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<script>
    $(function() {
		var price_list =[
            '신라면','카누',
            '진라면','닭고기',
            '돼지고기(등심)','돼지고기(안심)',
            '소고기','계란 30구',
            '[동서식품]맥심 모카골드 믹스'
        ]
		$("#value").autocomplete({  
			source : price_list,	
			select : function(event, ui) {	
				console.log(ui.item);
			},
			focus : function(event, ui) {
				return false;
			},
			minLength: 1,
			autoFocus: true,
			classes: {
			    "ui-autocomplete": "highlight"
			},
			delay: 0,
			position: { my : "right top", at: "right bottom" },
			close : function(event){
				console.log(event);
			}
		});
	});
</script>
{% endblock head %}
{% block contents %}
<div class="banner-inner" id='Nav'>
    <div class ="banner-cover">
        <h1>원하시는 상품의 물가를 확인해보세요</h1>
        <div class="search">
            <input class ='search_input'
                    type="text"
                    id = 'value'
                    placeholder="궁금한 제품을 검색하세요."
                    onfocus="this.placeholder=''" 
                    onKeypress="javascript:if(event.keyCode==13){search()}"
                    spellcheck="false">
            <button class = "search_button" type="button" style = 'background-color:transparent;' onclick='search()'>
                <img class ='search_img' src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png">
            </button>
        </div>
    </div>
    <div class="round">
        <script src="static/js/pred.js"></script>
        <script src ="https://d3js.org/d3.v4.min.js"></script>
        <script>
            let mydata = JSON.parse(JSON.stringify(data));
            console.log(mydata);
            cow = (((mydata[1].price-mydata[0].price)/mydata[0].price)*100).toFixed(2)
            pig = (((mydata[3].price-mydata[2].price)/mydata[2].price)*100).toFixed(2)
            chicken = (((mydata[5].price-mydata[4].price)/mydata[4].price)*100).toFixed(2)
        </script>
        <div class="box">
            <a><h2>급등예상</h2></a>
        </div>
        <div class="box">
            <a id = 'box1' href="./price/5">
                <script>
                    document.getElementById('box1').innerHTML="1."+ mydata[1].price + "원<br>" + cow + "%"
                </script>
            </a>
        </div>
        <div class="box">
            <a id = 'box2' href="./price/5">
                <script>
                    document.getElementById('box2').innerHTML="2."+ mydata[3].price + "원<br>" + pig + "%"
                </script>
            </a>
        </div>
        <div class="box">
            <a id = 'box3' href="./price/5">
                <script>
                    document.getElementById('box3').innerHTML="3."+ mydata[5].price + "원<br>" + chicken + "%"
                </script>
            </a>
        </div>
        <div class="box">
            <a href="./url">4.</a>
        </div>
        <div class="box">
            <a href="./url">5.</a>
        </div>
    </div>
    <hr class='line'>
    <table class='def' >
        <td>
            밥비트입니다.
            밥비트입니다.
            밥비트입니다.
            밥비트입니다.
            밥비트입니다.
            밥비트입니다.
        </h3></td>
    </table>
</div>

<script>
    function search() {
        var price = document.getElementById('value').value;
        if (price=='진라면'){
            location.href="price/1/";
        }else if (price=='신라면'){
            location.href="price/2/";
        }else if (price=='돼지고기(등심)'){
            location.href="price/3/";
        }else if (price=='돼지고기(안심)'){
            location.href="price/4/";
        }else if (price=='소고기'){
            location.href="price/5/";
        }else if (price=='[동서식품]맥심 모카골드 믹스'){
            location.href="price/6/";
        }else if (price=='카누'){
            location.href="price/7/";
        }else if (price=='닭고기'){
            location.href="price/8/";
        }else if (price=='계란 30구'){
            location.href="price/9/";
        }else {
            alert('다시 입력해주세요!')
            document.getElementById("value").value ='';
        }
    }
    </script>
{% endblock contents %}